import { Meta } from '@storybook/blocks';

<Meta title="src/components/FastTable/ImportDialog/PromisePool" />

----- 
`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *PropertyDeclaration*
> 同时存在的promise数量

#### Source Code:

```ts
core: number;

```

----- 
`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *PropertyDeclaration*
> 当前的执行池

#### Source Code:

```ts
executors: Executor[] = [];

```

----- 
`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *PropertyDeclaration*
> 是否正在执行

#### Source Code:

```ts
isExecuting = false;

```

----- 
`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *PropertyDeclaration*
> 当前任务的Promise状态

#### Source Code:

```ts
statusPromise: Promise<any> = Promise.resolve();

```

----- 
`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *PropertyDeclaration*
> 是否暂停

#### Source Code:

```ts
isPause = false;

```

# getStatusPromise

`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *MethodDeclaration*

> 获取当前执行状态Promise

#### Source Code:

```ts
public getStatusPromise() {
    return this.statusPromise
  }
```

# clear

`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *MethodDeclaration*

> 清空未开始的任务执行，已开始执行的任务无法清空领

#### Returns:
  Promise对象，如果该对象状态为resolve，则清空完成

#### Source Code:

```ts
async clear() {
    await this.pause()
    this.executors.splice(0, this.executors.length)
    return this.statusPromise
  }
```

# pause

`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *MethodDeclaration*

> 暂停未开始的任务执行，已开始执行的任务无法暂停

#### Returns:
  Promise对象，如果该对象状态为resolve，则暂停完成

#### Source Code:

```ts
pause() {
    this.isPause = true
    return this.statusPromise
  }
```

# resume

`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *MethodDeclaration*

> 开始, 恢复暂停任务执行

#### Returns:

#### Source Code:

```ts
resume() {
    this.isPause = false
    return this.beginExecute()
  }
```

# setCore

`src/components/FastTable/ImportDialog/PromisePool`
**AST Node Type:** *MethodDeclaration*

> 设置并发数，此操作会暂停当前任务，并且在暂停完成后 修改并发数，然后会开启当前任务

#### Parameter:

- `core`  — 并发数量
#### Returns:

#### Source Code:

```ts
async setCore(core: number) {
    validateCore(core)

    if (this.isExecuting) {
      await this.pause()
      this.core = core
      return this.resume()
    } else {
      this.core = core
    }
  }
```

